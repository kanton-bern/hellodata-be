<div class="sidebar close">
  <div [pTooltip]="'@HelloDATA' | transloco" class="logo-details" tooltipPosition="bottom">
    <img alt="logo" src="/assets/img/hd.png" style="cursor: pointer" (click)="navigateHome()"/>
    <span class="logo_name">{{ '@HelloDATA' | transloco }}</span>
  </div>
  <ul *ngIf="(navItems$ | async) as navItems" class="nav-links">
    <ng-template [ngForOf]="navItems" let-i="index" let-item ngFor>
      <li>
        <a *ngIf="item.routerLink" [id]="item.id" [routerLink]="item.routerLink"
           matomoCategory="Menu Item"
           matomoAction="[Click] - {{item.text}}"
           [matomoTracker]="['click']"
        >
          <i [ngClass]="item.icon"></i>
          <span class="link_name">{{ item.text | transloco }}</span>
        </a>
        <a *ngIf="!item.routerLink && item.items && item.items.length > 0" [attr.href]="item.url"
           [attr.target]="item.target" [id]="item.id"
           [matomoTracker]="['click']"
           matomoCategory="Menu Item"
           matomoAction="[Click] - {{item.text}}">
          <i [ngClass]="item.icon"></i>
          <span class="link_name">{{ item.text | transloco }}</span>
        </a>
        <ul *ngIf="item.items && item.items.length > 0" class="second-level-menu">
          <ng-template [ngForOf]="item.items" let-i="index" let-last="last" let-secondLevel ngFor>
            <li>
              <a *ngIf="secondLevel.routerLink" [id]="secondLevel.id" [routerLink]="secondLevel.routerLink"
                 [matomoTracker]="['click']"
                 matomoCategory="Menu Item"
                 matomoAction="[Click] - {{secondLevel.text}}">
                <span class="link_name">{{ secondLevel.text | transloco }}</span>
                <i *ngIf="secondLevel.items" class='fas fa-angle-right'></i>
              </a>
              <a *ngIf="!secondLevel.routerLink" [id]="secondLevel.id"
                 (click)="openWindow(secondLevel.url, secondLevel.target)"
                 [matomoTracker]="['click']"
                 matomoCategory="Menu Item"
                 matomoAction="[Click] - {{secondLevel.text}}">
                <span class="link_name">{{ secondLevel.text | transloco }}</span>
                <i *ngIf="secondLevel.items && secondLevel.items.length > 0" class='fas fa-angle-right'></i>
              </a>
              <ul *ngIf="secondLevel.items && secondLevel.items.length > 0" class="third-level-menu">
                <ng-template [ngForOf]="secondLevel.items" let-i="index" let-thirdLevel ngFor>
                  <li>
                    <a *ngIf="thirdLevel.routerLink" [id]="thirdLevel.id" [routerLink]="thirdLevel.routerLink"
                       [matomoTracker]="['click']"
                       matomoCategory="Menu Item"
                       matomoAction="[Click] - {{thirdLevel.text}}">
                      <span class="link_name">{{ thirdLevel.text | transloco }}</span>
                    </a>
                    <a *ngIf="!thirdLevel.routerLink"
                       (click)="openWindow(thirdLevel.url, thirdLevel.target)"
                       [id]="thirdLevel.id"
                       [matomoTracker]="['click']"
                       matomoCategory="Menu Item"
                       matomoAction="[Click] - {{thirdLevel.text}}">
                      <span class="link_name">{{ thirdLevel.text | transloco }}</span>
                    </a>
                  </li>
                </ng-template>
              </ul>
            </li>
          </ng-template>
        </ul>
      </li>
    </ng-template>
  </ul>
</div>


<section class="content-section">
  <app-header
    [title]="title">
  </app-header>
  <div class="grid">
    <div [ngClass]="'col'" [style]="{height: 'calc(100vh)', 'overflow-y': 'scroll'}" id="mainContentDiv">
      <ng-content ng-style="width: 100%"></ng-content>
      <p-scrollTop [style]="{position: 'fixed', bottom: '2rem', right: '2rem'}" [threshold]="10" icon="fas fa-arrow-up"
                   target="parent"></p-scrollTop>
    </div>
    <div *ngIf="selectCurrentUserPermissionsLoaded$" [ngClass]="['col-fixed', 'right-panel-close']"
         [ngStyle]="{'width': '30px'}" class="right-panel">
      <app-summary></app-summary>
    </div>
  </div>

</section>

<p-toast></p-toast>
<app-unsaved-changes-dialog></app-unsaved-changes-dialog>

