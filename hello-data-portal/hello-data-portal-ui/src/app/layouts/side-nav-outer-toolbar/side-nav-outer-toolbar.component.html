<div class="sidebar close" id="appSidebar">
  <div [pTooltip]="'@HelloDATA' | transloco" class="logo-details" tooltipPosition="bottom">
    <img alt="logo" src="/assets/img/hd.png" style="cursor: pointer" (click)="navigateHome()"
         (keydown)="navigateHome()"/>
    <span class="logo_name">{{ '@HelloDATA' | transloco }}</span>
  </div>
  @if ((navItems$ | async); as navItems) {
    <div class="sidebar close">
      <div [pTooltip]="'@HelloDATA' | transloco" class="logo-details mb-2" tooltipPosition="bottom">
        <img alt="logo" src="/assets/img/hd.png" style="cursor: pointer" (click)="navigateHome()"
             (keydown)="navigateHome()"/>
        <span class="logo_name">{{ '@HelloDATA' | transloco }}</span>
      </div>
      <p-tieredMenu #menu [model]="navItems" id="menu" [autoDisplay]="true" (mouseleave)="onMouseleave()"
                    (mouseenter)="showMenu($event)">
        <ng-template pTemplate="item" let-item let-hasSubmenu="hasSubmenu">
          <a pRipple class="flex p-menuitem-link"
             [ngClass]="{'first-level-item flex-col items-center justify-center':
                            item.isFirstLevel,
                          'items-center': !item.isFirstLevel
                        }" (click)="openWindow(item)">
            <!-- FIRST LEVEL -->
            @if (item.isFirstLevel) {
              <span [class]="item.icon" class="p-menuitem-icon text-center" style="font-size: 2rem"></span>
              <span class="text-center" style="font-size: 0.6rem; font-weight: 300">{{ item.label | transloco }}</span>
            } @else {
              <span [class]="item.icon" class="p-menuitem-icon"></span>
              <span class="ml-2">{{ item.label | transloco }}</span>
              @if (item.badge) {
                <p-badge class="ml-auto" [value]="item.badge"/>
              }
              @if (item.shortcut) {
                <span
                  class="ml-auto border border-surface rounded-border bg-surface-100 dark:bg-surface-700 text-xs p-1">
                  {{ item.shortcut }}
                </span>
              }
              @if (hasSubmenu) {
                <i class="pi pi-angle-right ml-auto text-primary"></i>
              }
            }
            <!-- SUBMENU ITEMS -->
          </a>
        </ng-template>
      </p-tieredMenu>
    </div>
  }

</div>


<section class="content-section">
  <app-header [title]="title()"/>
  <div class="grid [grid-template-columns:repeat(11,minmax(0,1fr))_30px] mt-[20px]">
    <div class="col-span-11 h-[calc(100vh-70px)] overflow-y-scroll" id="mainContentDiv">
      <ng-content/>
    </div>

    @if (hasMinimalRequiredPermissions$ | async) {
      <div class="right-panel w-[30px] right-panel-close">
        <app-summary/>
      </div>
    }
  </div>
</section>

<p-toast/>
<app-unsaved-changes-dialog/>

