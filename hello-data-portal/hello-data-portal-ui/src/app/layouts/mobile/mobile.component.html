<ng-container *ngIf="translationsLoaded$ | async"></ng-container>
<ng-container *ngIf="availableDataDomains$ | async"></ng-container>
<!-- Top Bar -->
<div class="grid w-full bg-white surface-border border-bottom-1 fixed top-0 left-0 z-5" style="height: 4rem;">
  <div class="col-12 flex pt-1">
    <div class="col-4 flex align-items-center justify-content-start h-full">
      <button
        type="button" pAnimate pRipple
        class="p-button p-button-text h-full flex align-items-center justify-content-center"
        (click)="showSidebar = true"
        aria-label="Open menu"
      >
        <i class="pi pi-bars text-2xl" style="color: black"></i>
      </button>
    </div>

    <div class="col-4 flex align-items-center justify-content-start h-full">
      <span *ngIf="(selectedDataDomain$ | async) as selectedDataDomain">
          <a (click)="selectedDataDomainMenu.toggle($event)"  style="cursor: pointer"
             class="route-link p-button-link align-self-end layout-topbar-button" pAnimate pRipple>
            <span class="pl-2">{{ selectedDataDomain.name | transloco }}</span>
            <i class="fas fa-chevron-down p-1"></i>
          </a>
       </span>
    </div>

    <div class="col-4 flex align-items-center justify-content-end h-full">
      <button pAnimate pRipple
        type="button"
        class="p-button p-button-text p-0 h-full flex align-items-center justify-content-center"
        aria-label="User Profile"
      >
        <i class="pi pi-user text-2xl" (click)="menu.toggle($event)" style="color: black"></i>
      </button>
    </div>
  </div>
</div>

<p-sidebar
  [(visible)]="showSidebar"
  position="left"
  [modal]="true"
  styleClass="w-64"
  [baseZIndex]="10000"
>
</p-sidebar>

<div class="pt-14 bg-gray-50 min-h-screen">
  <div [ngClass]="'col'" [style]="{height: 'calc(100vh - 4rem)', 'overflow-y': 'scroll', 'margin-top': '3rem'}" id="mainContentDiv">
    <ng-content ng-style="width: 100%"></ng-content>
    <p-scrollTop [style]="{position: 'fixed', bottom: '2rem', right: '2rem'}" [threshold]="10" icon="fas fa-arrow-up"
                 target="parent"></p-scrollTop>
  </div>
</div>


<p-toast></p-toast>
<app-unsaved-changes-dialog></app-unsaved-changes-dialog>
<p-menu #menu [model]="userMenuItems" [popup]="true"></p-menu>
<p-menu #selectedDataDomainMenu [model]="dataDomainSelectionItems" [popup]="true"></p-menu>
